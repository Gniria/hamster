---
layout: post
title:  真正的OO
date:   2016-06-15 09:35:24 +0800
tags: [notes, oo]
---

真正的面向对象是什么样的？

虽然也会用类、对象、抽象，但对于很多大型库／项目，看源码仍然会觉得费劲，感觉很复杂，为何要这样设计，现在想想，很大程度上是因为自己没有真正的面向对象，没有对功能／业务进行完全的对象化抽象，而是对象夹杂着过程。
包括很多设计模式，自己大概知道是怎么写出来了，但目前并没有意识到它的使用场景，甚至觉得压根用不着啊还增加了复杂度（除了提升点逼格）。
这算是软件工程的理念，比纯粹的编程高了一个档次。
可以先多了解些相关思想和实践：
领域模型、充血模型、贫血模型、事务脚本（面向过程）、领域驱动设计（DDD）、单元测试、测试驱动设计（TDD）
MVC与三层架构（MVC是微观的实现方案，三层架构是宏观的分层，MVC只是后者的表现层的做法，用于视图层各个部分的解耦合）－－每个人的说法不一样，需要自己好好研究一下
eg：MVC指视图层（View）、模型层（Model）、控制层（Controller），三层指：展现层（UI）、业务逻辑层（BLL）、数据访问层（DAL）； 他们的视图层大致是一样的，目的其实都是分层解耦。
另外一些原则：
高内聚低耦合、里氏替换等
比较推崇的人：Martin Fowler

我们通常写的Bean、Dao、Service、Controller这个称为贫血模型，各个层次职责单一；把业务逻辑塞到Bean里面（Service变瘦，Bean变胖）为充血模型，这样Bean 的表达能力强了，但对于多个Bean配合的业务，其耦合度高了。这也就是所谓的领域模型，Bean（领域模型）自身管理自己的状态和行为，比如Book内包含Book的各种属性，还包含Book的buy、read、lend等行为以及产生的状态。
两者的差别并不只是表面上看起来那么简单，更重要的是思维的转变。充血模型的Bean映射现实世界的对象的属性和行为，而贫血模型中需要Bean＋Service来表现。
```
1. 实体（Entities）：具备唯一ID，能够被持久化，具备业务逻辑，对应现实世界业务对象。
2. 值对象（Value objects）：不具有唯一ID，由对象的属性描述，一般为内存中的临时对象，可以用来传递参数或对实体进行补充描述。
3. 工厂（Factories）：主要用来创建实体，目前架构实践中一般采用IOC容器来实现工厂的功能。
4. 仓库（Repositories）：用来管理实体的集合，封装持久化框架。
5. 服务（Services）：为上层建筑提供可操作的接口，负责对领域对象进行调度和封装，同时可以对外提供各种形式的服务。
```







参考：
http://www.ituring.com.cn/article/125 贫血模型和充血模型的对比（翻译自：Martin fowler）
